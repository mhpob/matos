<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Internal functions used by matos — utilities • matos</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Internal functions used by matos — utilities"><meta name="description" content="Non-exported utility functions used by other functions in matos."><meta property="og:description" content="Non-exported utility functions used by other functions in matos."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">matos</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/multiple-projects.html">`matos` for the power user</a></li>
    <li><a class="dropdown-item" href="../articles/matos-otndo.html">Summarizing with otndo</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mhpob/matos/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Internal functions used by <code>matos</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/mhpob/matos/blob/master/R/utilities.R" class="external-link"><code>R/utilities.R</code></a></small>
      <div class="d-none name"><code>utilities.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Non-exported utility functions used by other functions in <code>matos</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_file_list</span><span class="op">(</span><span class="va">project_number</span>, <span class="va">data_type</span>, force <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_file_list_mem</span><span class="op">(</span><span class="va">project_number</span>, <span class="va">data_type</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_project_number</span><span class="op">(</span><span class="va">project_name</span>, matos_projects <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_project_name</span><span class="op">(</span><span class="va">project_number</span>, matos_projects <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">html_table_to_df</span><span class="op">(</span><span class="va">html_file_list</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">login_check</span><span class="op">(</span>url <span class="op">=</span> <span class="st">"https://matos.asascience.com/report/submit"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">project_check</span><span class="op">(</span><span class="va">project</span>, return_projects <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">scrape_file_urls</span><span class="op">(</span><span class="va">html_file_list</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">download_process</span><span class="op">(</span><span class="va">url</span>, <span class="va">out_dir</span>, <span class="va">overwrite</span>, to_vue <span class="op">=</span> <span class="cn">FALSE</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-project-number">project_number<a class="anchor" aria-label="anchor" href="#arg-project-number"></a></dt>
<dd><p>Number of the project</p></dd>


<dt id="arg-data-type">data_type<a class="anchor" aria-label="anchor" href="#arg-data-type"></a></dt>
<dd><p>one of "dataextractionfiles" for OTN detection extracts
or "downloadfiles" for the uploaded project files.</p></dd>


<dt id="arg-force">force<a class="anchor" aria-label="anchor" href="#arg-force"></a></dt>
<dd><p>Do you want to reset the cache and re-ping the database?
Defaults to false.</p></dd>


<dt id="arg-project-name">project_name<a class="anchor" aria-label="anchor" href="#arg-project-name"></a></dt>
<dd><p>Character string of the full MATOS project name. This will be the
big name in bold at the top of your project page, not the "Project Title"
below it. Will be coerced to all lower case, so capitalization doesn't matter.</p></dd>


<dt id="arg-matos-projects">matos_projects<a class="anchor" aria-label="anchor" href="#arg-matos-projects"></a></dt>
<dd><p>Data frame. Used to pass the MATOS project list from
<code>project_check</code>.</p></dd>


<dt id="arg-html-file-list">html_file_list<a class="anchor" aria-label="anchor" href="#arg-html-file-list"></a></dt>
<dd><p>Listed files in HTML form. Always the result of
<code>get_file_list</code></p></dd>


<dt id="arg-url">url<a class="anchor" aria-label="anchor" href="#arg-url"></a></dt>
<dd><p>The (protected) URL that the overlapping function is trying to call.</p></dd>


<dt id="arg-project">project<a class="anchor" aria-label="anchor" href="#arg-project"></a></dt>
<dd><p>MATOS project ID. Can be the name or number of the project.</p></dd>


<dt id="arg-return-projects">return_projects<a class="anchor" aria-label="anchor" href="#arg-return-projects"></a></dt>
<dd><p>Logical. Do you want <code>project_check</code> to return the list
of projects? Used to not ping the website too much in one function call.</p></dd>


<dt id="arg-out-dir">out_dir<a class="anchor" aria-label="anchor" href="#arg-out-dir"></a></dt>
<dd><p>Character. To what directory would you like your files downloaded?
Defaults to the current working directory.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Logical. Do you want to overwrite existing files that have
the same name (<code>TRUE</code>) or protect yourself against doing this
(<code>FALSE</code>, the default)?</p></dd>


<dt id="arg-to-vue">to_vue<a class="anchor" aria-label="anchor" href="#arg-to-vue"></a></dt>
<dd><p>Logical. Should the data be converted to match that of VUE's
CSV export? Defaults to FALSE.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical. Do you want to silence matos' updates? Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p><code>get_file_list</code> checks to see if it should re-evaluate itself, then wraps
<code>get_file_list_mem</code> which is the actual workhorse.</p>
<p><code>get_file_list_mem</code> memoised function which scrapes the HTML associated
with the project or data extraction files page provided with a given project.</p>
<p><code>get_project_number</code> finds the internal MATOS number associated with each
project by scraping the HTML of the main MATOS projects page.</p>
<p><code>get_project_name</code> finds the MATOS project name associated with the given
project number by scraping the HTML of the main MATOS projects page.</p>
<p><code>html_table_to_df</code> converts the HTML table provided by <code>get_file_list</code>
into a R-usable data frame.</p>
<p><code>login_check</code> pings protected URLs and calls <code>matos_login</code> when referred
to the login page.</p>
<p><code>project_check</code></p>
<p><code>scrape_file_urls</code> is used internally by <code>html_table_to_df</code> to extract
the URLs associates with each "Download" link.</p>
<p><code>download_process</code> is used internally by <code>get_project_file</code> and
<code>get_extract_file</code></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.obrien.page" class="external-link">Michael O’Brien</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

